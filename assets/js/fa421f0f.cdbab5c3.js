"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6329],{10475:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"gists/Pip/install_py_pkgs_offline","title":"Install Python Packages Offline (Windows)","description":"This assumes you have installed the Python (eg, 3.11.11) in the destination Offline computer. Also the python version has to be same in both the computers (where you dowload the packages and where you install them).","source":"@site/docs/gists/Pip/install_py_pkgs_offline.md","sourceDirName":"gists/Pip","slug":"/gists/Pip/install_py_pkgs_offline","permalink":"/docs/gists/Pip/install_py_pkgs_offline","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"install_py_pkgs_offline","title":"Install Python Packages Offline (Windows)","sidebar_label":"Install Python Packages Offline (Windows)"},"sidebar":"tutorialSidebar","previous":{"title":"Update Grub (Linux)","permalink":"/docs/gists/Linux/update_grub_linux"},"next":{"title":"Python pip Commands","permalink":"/docs/gists/Pip/python_pip_cmds"}}');var l=s(74848),t=s(28453);const o={id:"install_py_pkgs_offline",title:"Install Python Packages Offline (Windows)",sidebar_label:"Install Python Packages Offline (Windows)"},a=void 0,r={},c=[{value:"Prerequisites / To Do",id:"prerequisites--to-do",level:2},{value:"Install Packages",id:"install-packages",level:2},{value:"Transferring offline packages",id:"transferring-offline-packages",level:2},{value:"Installing packages offline",id:"installing-packages-offline",level:2},{value:"For building Docker Images",id:"for-building-docker-images",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"This assumes you have installed the Python (eg, 3.11.11) in the destination Offline computer. Also the python version has to be same in both the computers (where you dowload the packages and where you install them)."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites--to-do",children:"Prerequisites / To Do"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.em,{children:["This need to be done on a ",(0,l.jsx)(n.code,{children:"Windows machine"})," itself, similar to your offline computer, but with open internet"]})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Make a list of required packages in a file, eg ",(0,l.jsx)(n.a,{href:"https://github.com/004Ajay/Personal-Works/blob/main/Python/Works/QR_Code_Streamlit_App/requirements.txt",children:"requirements.txt"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Make a dedicated folder for this work."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Make one virtual env (",(0,l.jsx)(n.code,{children:"python -m venv offline_pkgs_env"}),") and activate it."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Make a folder for storing the packages, eg: ",(0,l.jsx)(n.code,{children:"offline_packages"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"install-packages",children:"Install Packages"}),"\n",(0,l.jsx)(n.p,{children:"In the activated venv, do"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip download -r requirements.txt -d offline_packages\n"})}),"\n",(0,l.jsxs)(s,{children:[(0,l.jsx)("summary",{children:(0,l.jsx)("b",{children:" See a possible error "})}),(0,l.jsx)(n.p,{children:"Make sure to have same Python version and OS in your downloading env and you destination env. Otherwise you will have error like downloading Python 3.9 packages in Linux for Python 3.11.11 Windows destination"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"ERROR: Could not find a version that satisfies the requirement pillow==10.4.0 (from versions: none) 1.540\n\nERROR: No matching distribution found for pillow==10.4.0\n"})}),(0,l.jsx)(n.p,{children:"When we check the downloaded packages we have 'pillow-10.4.0-cp39-cp39-manylinux_2_28_x86_64.whl' but see the 'cp39' and 'manylinux', it is for Python 3.9 in Linux and not Python 3.11.11 in Windows."})]}),"\n",(0,l.jsxs)(n.p,{children:["In the offline_packages folder you can view the downloaded ",(0,l.jsx)(n.code,{children:".whl / wheel"})," files of all libs you listed in requirements.txt"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"transferring-offline-packages",children:"Transferring offline packages"}),"\n",(0,l.jsx)(n.p,{children:"The downloaded package files (offline_packages folder) can be transferred to offline computer / destination using a USB or Shared Drive."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"installing-packages-offline",children:"Installing packages offline"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Copy the ",(0,l.jsx)(n.code,{children:"downloaded packages folder (offline_packages)"})," to the destination computer."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["Copy the ",(0,l.jsx)(n.code,{children:"requirements.txt"})," file to the destination computer."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"Make a venv in the destination computer to make place to install the offline packages."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m venv app_env\n"})}),"\n",(0,l.jsx)(n.p,{children:"Then install the packages offline using"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"pip install --no-index --find-links=offline_packages -r requirements.txt\n"})}),"\n",(0,l.jsxs)(n.p,{children:["here ",(0,l.jsx)(n.code,{children:"offline_packages"})," is the folder name where the downloaded files of libs exists."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"for-building-docker-images",children:"For building Docker Images"}),"\n",(0,l.jsxs)(n.p,{children:["Copy locally downloaded dependencies, this ",(0,l.jsx)(n.code,{children:"offline_packages"})," is the same folder where we downloaded the files"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"COPY offline_packages /app/offline_packages\n"})}),"\n",(0,l.jsx)(n.p,{children:"Copy requirements file"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"COPY requirements.txt /app/requirements.txt\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Run the same ",(0,l.jsx)(n.code,{children:"pip install"})," command above"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"RUN pip install --no-cache-dir --no-index --find-links=offline_packages -r requirements.txt && rm -rf offline_packages\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["If your workdir is different, you can do ",(0,l.jsx)(n.code,{children:"/app/offline_packages"}),", ",(0,l.jsx)(n.code,{children:"/app/requirements.txt"})]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["If pip happens to cache something, with ",(0,l.jsx)(n.code,{children:"--no-cache-dir"})," it will not"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"So with this method"})}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"You can speed up the docker creation process"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"You don't need to do (CA Certificate copying to docker image)"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"COPY ca_cert.pem /usr/local/share/ca-certificates/ca_cert.crt\nRUN update-ca-certificates\n\nENV REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca_cert.crt\nENV SSL_CERT_FILE=/etc/ssl/certs/ca_cert.crt\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const l={},t=i.createContext(l);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);