"use strict";(self.webpackChunkwebsite_builder=self.webpackChunkwebsite_builder||[]).push([[6899],{175:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"commands/Ollama","title":"Ollama","description":"Change Ollama Models Directory in Ubuntu Linux","source":"@site/docs/commands/Ollama.md","sourceDirName":"commands","slug":"/commands/Ollama","permalink":"/docs/commands/Ollama","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Ollama","title":"Ollama","sidebar_label":"Ollama"},"sidebar":"docsSidebar","previous":{"title":"Miscellaneous","permalink":"/docs/commands/Miscellaneous"},"next":{"title":"Open WebUI","permalink":"/docs/commands/Open WebUI"}}');var a=l(4848),o=l(8453);const r={id:"Ollama",title:"Ollama",sidebar_label:"Ollama"},t=void 0,i={},d=[{value:"Change Ollama Models Directory in Ubuntu Linux",id:"change-ollama-models-directory-in-ubuntu-linux",level:2},{value:"1.1. Copy installed ollama models from one disk to another",id:"11-copy-installed-ollama-models-from-one-disk-to-another",level:3},{value:"1.2. Get it from any other system (Linux) in your network",id:"12-get-it-from-any-other-system-linux-in-your-network",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"change-ollama-models-directory-in-ubuntu-linux",children:"Change Ollama Models Directory in Ubuntu Linux"}),"\n",(0,a.jsx)(n.h3,{id:"11-copy-installed-ollama-models-from-one-disk-to-another",children:"1.1. Copy installed ollama models from one disk to another"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cp -r <curret/path/to/models> <destination/to/store/model/files>\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Example command: ",(0,a.jsx)(n.code,{children:"cp -r /mnt/INTERNAL/Ollama/.ollama /home/appuser/Ollama/.ollama"})]}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.h3,{id:"12-get-it-from-any-other-system-linux-in-your-network",children:"1.2. Get it from any other system (Linux) in your network"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"./secure_copy",children:"See Secure Copy (SCP)"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"2. Stop Ollama Service (optional but recommended)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo systemctl stop ollama\n"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"3. Get user and group owner names of your destination folder"})}),"\n",(0,a.jsx)(n.p,{children:"Go to the folder where you're going to keep ollama files"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd /home/appuser/Ollama/.ollama (Example)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Check details of all files"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ls -lk -a\n"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"4. Create and Override Ollama service using config file"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo mkdir -p /etc/systemd/system/ollama.service.d; sudo nano /etc/systemd/system/ollama.service.d/override.conf\n"})}),"\n",(0,a.jsx)(n.p,{children:"Add the path, user, and group of new location in the file"}),"\n",(0,a.jsx)(n.p,{children:"Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'[Service]\nEnvironment="OLLAMA_MODELS=/home/appuser/ollama/.ollama/models" # change this path to your path\nUser=appuser # change this path to your User\nGroup=appuser # change this path to your Group\n'})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"5. Restart System Daemon (this is not a system reboot) and Ollama"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo systemctl daemon-reload\n\nsudo systemctl restart ollama\n"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"6. Check the working"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ollama list\n"})}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"7. Try downloading a model and check if it is saving to the new location"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ollama run <model_name>\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Get new model name from ",(0,a.jsx)(n.code,{children:"ollama.com/models"})]}),"\n"]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.p,{children:"Optionals:"}),"\n",(0,a.jsx)(n.p,{children:"Check details of all directories"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ls -ld -a\n"})}),"\n",(0,a.jsx)(n.p,{children:"To see status of ollama (whether it is running, stopped, exited, error)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"sudo systemctl status ollama\n"})}),"\n",(0,a.jsx)(n.p,{children:"To see the error logs of ollama (limiting to the latest 50 lines)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"journalctl -u ollama -n 50\n"})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>t});var s=l(6540);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);