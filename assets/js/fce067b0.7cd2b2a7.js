"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2558],{4509:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"commands/Rsync","title":"Rsync","description":"Rsync and Parallel to copy files","source":"@site/docs/commands/Rsync.md","sourceDirName":"commands","slug":"/commands/Rsync","permalink":"/docs/commands/Rsync","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"Rsync","title":"Rsync","sidebar_label":"Rsync"},"sidebar":"tutorialSidebar","previous":{"title":"PyTorch","permalink":"/docs/commands/PyTorch"},"next":{"title":"SSH","permalink":"/docs/commands/SSH"}}');var i=s(4848),l=s(8453);const c={id:"Rsync",title:"Rsync",sidebar_label:"Rsync"},o=void 0,r={},a=[{value:"Rsync and Parallel to copy files",id:"rsync-and-parallel-to-copy-files",level:2},{value:"Lightning fast (two steps/commands)",id:"lightning-fast-two-stepscommands",level:4},{value:"1. Make a text file having path of files to be copied",id:"1-make-a-text-file-having-path-of-files-to-be-copied",level:3},{value:"2. Rsync with parallel processing to copy",id:"2-rsync-with-parallel-processing-to-copy",level:3},{value:"3. To keep the folder structure while copying (files inside different folders)",id:"3-to-keep-the-folder-structure-while-copying-files-inside-different-folders",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"rsync-and-parallel-to-copy-files",children:"Rsync and Parallel to copy files"}),"\n",(0,i.jsx)(n.h4,{id:"lightning-fast-two-stepscommands",children:"Lightning fast (two steps/commands)"}),"\n",(0,i.jsx)(n.h3,{id:"1-make-a-text-file-having-path-of-files-to-be-copied",children:"1. Make a text file having path of files to be copied"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"find ./<folder_having_all_the_files_to_be_copied> -type f > <location_with_name_of_text_file>.txt \n"})}),"\n",(0,i.jsxs)(n.p,{children:["Example command: ",(0,i.jsx)(n.code,{children:"find ./downloaded_files/items_to_move -type f > to_copy.txt"})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"2-rsync-with-parallel-processing-to-copy",children:"2. Rsync with parallel processing to copy"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"time cat <previously_made_text_file>.txt | parallel -j <num_of_cores_to_use> -X -n 1 rsync -av --inplace {} ./<destination_folder_to_copy_the_files>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Example command: ",(0,i.jsx)(n.code,{children:"time cat to_copy.txt | parallel -j 10 -X -n 1 rsync -av --inplace {} ./Receiver/"})]}),"\n",(0,i.jsx)(n.p,{children:"So you will be doing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"find ./downloaded_files/items_to_move -type f > to_copy.txt \n\ntime cat to_copy.txt | parallel -j 90 -X -n 1 rsync -av --inplace {} ./Receiver/\n"})}),"\n",(0,i.jsx)(n.p,{children:"to copy a small/huge number of files (from 1 to more than 1 Million files)"}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"3-to-keep-the-folder-structure-while-copying-files-inside-different-folders",children:"3. To keep the folder structure while copying (files inside different folders)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Add ",(0,i.jsx)(n.code,{children:"--relative"})," flag with the ",(0,i.jsx)(n.code,{children:"cat"})," command"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["** ",(0,i.jsx)(n.code,{children:"--relative"})," tells rsync to recreate the directory structure based on the file path"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"time cat to_copy.txt | parallel -j 10 -X -n 1 rsync -av --inplace --relative {} ./Receiver/\n"})}),"\n",(0,i.jsx)(n.p,{children:"Command breakdown:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"time"})," is used to record wall clock time, system time etc..."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"cat"})," reads the contents of the text file and prints it to the terminal"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"|"})," (Pipe symbol) takes the output of the command on the left (",(0,i.jsx)(n.code,{children:"cat to_copy.txt"}),") and feeds it as the input to the command on the right. Essentially, it\u2019s creating a chain of commands where the output of one becomes the input of the next."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"rsync"})," is the utility for synchronizing files and directories."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"-av"}),' is the "archive" and "verbose" option.']}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Archive maintain integrity like permissions, timestamps, and other attributes."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verbose shows progress, which files are being transferred and any changes that are being made."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--inplace"})," tells ",(0,i.jsx)(n.code,{children:"rsync"})," to modify the original file directly, rather than creating a new copy."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--relative"})," tells ",(0,i.jsx)(n.code,{children:"rsync"})," to keep the directory structure as such."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"{}"})," is a placeholder to substitute the name of the file being processed by ",(0,i.jsx)(n.code,{children:"rsync"})]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var t=s(6540);const i={},l=t.createContext(i);function c(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);